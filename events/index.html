<p class="lead">
  An effective way to decouple a system is to fire domain events on important updates. This small library
  contains an elegant publish/subscribe eventing system.
</p>

<p>To access the domain events, <a href="/docs/bridge.core/service-container#dependency-injection">inject</a> the <code>Events</code> class.</p>
<h2 id="firing-events">Firing events</h2>
<p>To fire an event, you need to consider two things: the <strong>event object</strong> and the <strong>event identifier</strong>. If you simply
want to provide a string value as the event object, you should specify the event identifier explicitly. If the
identifier is omitted, the type of the event object will be used:</p>
<pre><code class="lang-dart">// Using explicit identifier
events.fire(&#39;message&#39;, as: #MyEvent);

// Using a special class
events.fire(new MyEvent());

// The above is equal to this (this is superfluous)
events.fire(new MyEvent(), as: MyEvent);
</code></pre>
<h2 id="listening-to-events">Listening to events</h2>
<p>When you&#39;re listening to an event, you need to know the identifier of that event. You will receive the event objects as
a stream:</p>
<pre><code class="lang-dart">// From the `fire` examples above
Stream&lt;String&gt; myEvents = events.on(#MyEvent);
Stream&lt;MyEvent&gt; myEvents = events.on(MyEvent);

// Callback style listener
events.on(MyEvent).listen((MyEvent event) {
  // ...
});

// Async style listener
await for (String event in events.on(#MyEvent)) {
  // ...
}
</code></pre>
<blockquote>
<p><strong>Note</strong>: In these examples we use symbol literals for identifiers, but you can use whatever value you want. Just
remember to use a constant, so that equality is innate.</p>
</blockquote>
<p>One approach would be to send through a data structure as the event object, and classify the type of event with an
explicit event id:</p>
<pre><code class="lang-dart">class Train {
  final int passengers;

  Train({int this.passengers});
}

// The identifier provides context
events.fire(new Train(passengers: 10), as: #TrainLeftTheStation);
events.fire(new Train(passengers: 0), as: #TrainCrashed);
events.fire(new Train(passengers: -666), as: #GhostTrain);
</code></pre>
